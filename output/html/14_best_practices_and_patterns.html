<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ComputoPermuto Book - 14_best_practices_and_patterns</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">ComputoPermuto Book -
14_best_practices_and_patterns</h1>
</header>
<h2 id="chapter-14-best-practices-and-patterns"><strong>Chapter 14: Best
Practices and Patterns</strong></h2>
<p>Congratulations! You have journeyed through the entire Computo and
Permuto ecosystem, from basic operators to complex data pipelines. You
have all the tools you need to tackle sophisticated JSON transformation
challenges.</p>
<p>This final chapter serves as a summary of the key strategies and best
practices we’ve discussed. Think of it as a concise checklist to consult
when you’re designing and writing your own scripts. Following these
principles will help you create transformations that are not just
correct, but also readable, maintainable, and efficient.</p>
<h3 id="separate-logic-from-presentation">1. Separate Logic from
Presentation</h3>
<p>This is the philosophical core of the Computo/Permuto toolkit. *
<strong>Use Computo for the “How”:</strong> Logic, conditionals,
iteration, calculation, and data preparation. * <strong>Use Permuto for
the “What”:</strong> Declarative, whole-structure templating and string
construction. * <strong>The Bridge:</strong> Use Computo to build the
perfect, clean context object and then pass that clean object to
<code>permuto.apply</code>. This decouples your final output structure
from your messy input structure.</p>
<h3 id="let-is-your-most-valuable-tool">2. <code>let</code> is Your Most
Valuable Tool</h3>
<p>Proper use of <code>let</code> is the key to writing clean and
efficient scripts. * <strong>DRY (Don’t Repeat Yourself):</strong> If
you use any expression more than once, bind it to a variable with
<code>let</code>. * <strong>Readability:</strong> Use <code>let</code>
to give descriptive names to complex, nested expressions. A variable
named <code>active_premium_users</code> is much clearer than a
multi-line <code>filter</code> expression. *
<strong>Performance:</strong> Binding a value with <code>let</code>
ensures it is evaluated only once. This is the single most important
optimization technique in Computo.</p>
<h3 id="filter-early-map-late">3. Filter Early, Map Late</h3>
<p>When building an array processing pipeline, the order of operations
is critical for performance. * <strong>Always <code>filter</code>
first.</strong> Reduce the size of your dataset at the earliest possible
moment. There is no reason to <code>map</code> over and transform items
that you are just going to discard. * Perform your <code>map</code>
operations on the smallest possible array. This minimizes processing
time and memory used for temporary objects.</p>
<h3 id="be-defensive-about-input">4. Be Defensive About Input</h3>
<p>Never assume your input data will be perfect. * <strong>Guard your
<code>get</code> calls.</strong> Before accessing a nested value like
<code>"/user/profile/name"</code>, first check if the parent
(<code>"/user/profile"</code>) exists and is truthy using an
<code>if</code> statement. * Provide sensible defaults in your
<code>else</code> branches to handle cases of missing or
<code>null</code> data. This makes your transformations more resilient
and prevents unexpected failures.</p>
<h3 id="compose-dont-build-monoliths">5. Compose, Don’t Build
Monoliths</h3>
<p>Computo’s power comes from composing simple, single-purpose
operators. * <strong>Embrace the Pipeline:</strong> Think of your
transformation as a series of small steps (e.g., filter -&gt; map -&gt;
reduce). This is easier to read, debug, and reason about than a single,
massive, deeply nested expression. * <strong>Recognize
Patterns:</strong> Look for opportunities to use the patterns we’ve
discussed: * <strong>Enrichment:</strong> Adding new fields to an object
with <code>merge</code>. * <strong>Forking:</strong> Creating multiple
outputs from a single source. * <strong>Aggregation:</strong>
Summarizing a list into a single report object.</p>
<h3 id="know-when-to-use-each-tool">6. Know When to Use Each Tool</h3>
<p>Choosing the right operator or pattern for the job is a sign of
mastery.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">If you need to…</th>
<th style="text-align: left;">Your first thought should be…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Create a new object from pieces</td>
<td style="text-align: left;"><code>obj</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">“Fill in the blanks” of a structure</td>
<td style="text-align: left;"><code>permuto.apply</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Make a decision</td>
<td style="text-align: left;"><code>if</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Transform every item in a list</td>
<td style="text-align: left;"><code>map</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Select a subset of items from a list</td>
<td style="text-align: left;"><code>filter</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Combine a list into a single value</td>
<td style="text-align: left;"><code>reduce</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Reuse a value or improve readability</td>
<td style="text-align: left;"><code>let</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Combine two or more objects</td>
<td style="text-align: left;"><code>merge</code></td>
</tr>
</tbody>
</table>
<h3 id="a-final-thought">A Final Thought</h3>
<p>The goal of Computo and Permuto is to move complex transformation
logic out of your imperative application code and into a declarative,
testable, and safe data format. By treating your transformations as
data, you gain clarity and flexibility.</p>
<p>You are now fully equipped to apply these principles to your own
projects. Happy transforming</p>
</body>
</html>
